<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Restaurant Recommendation</title>
    <!-- Bootstrap CSS 파일 포함 -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <style>
        .category-buttons {
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .category-row {
            display: flex;
            justify-content: center;
            width: 100%;
        }
        .form-control {
            width: 50%; /* 입력 필드의 너비를 50%로 조정 */
        }
    </style>
</head>
<body>
<!-- Navbar 포함 -->
<div th:replace="fragments/navbar :: navbar"></div>

<h1 class="text-center">음식점 랜덤 추천</h1>

<!-- 추천된 음식점 정보 표시 -->
<div class="container mt-4" th:if="${recommendedRestaurant}">
    <h2>추천 음식점</h2>
    <p>Name: <span th:text="${recommendedRestaurant.name}">Restaurant Name</span></p>
    <p>Address: <span th:text="${recommendedRestaurant.address}">Restaurant Address</span></p>
    <p>Phone: <span th:text="${recommendedRestaurant.phoneNumber}">Restaurant Phone</span></p>
    <p>Categories: <span th:each="category, iterStat : ${recommendedRestaurant.categories}"
                         th:text="${category.name} + (iterStat.last ? '' : ', ')">Category Name</span></p>
    <p>Description: <span th:text="${recommendedRestaurant.description}">Restaurant Description</span></p>
</div>

<!-- 폼 중앙에 배치 및 입력 필드 너비 조정 -->
<div class="d-flex justify-content-center">
    <form th:action="@{/restaurant/recommend}" method="post" class="w-50">
        <div class="row">
            <!-- 입력 필드 컬럼 -->
            <div class="col">
                <input type="text" class="form-control" id="excludedCategories" name="excludedCategories" placeholder="제외할 카테고리 입력">
            </div>
            <!-- 확인 버튼 컬럼 -->
            <div class="col-auto">
                <button type="submit" class="btn btn-success">확인</button>
            </div>
        </div>
    </form>
</div>

<div class="category-buttons">
    <!-- 메인 카테고리 버튼 -->
    <div class="category-row">
        <div th:each="category : ${mainCategories}">
            <button type="button" class="btn btn-primary m-1"
                    th:data-category-name="${category.name}" onclick="addCategoryFromData(this)">
                <span th:text="${category.name}"></span>
            </button>
        </div>
    </div>
    <!-- 기타 카테고리 버튼 -->
    <div class="category-row">
        <div th:each="category : ${otherCategories}">
            <button type="button" class="btn btn-secondary m-1"
                    th:data-category-name="${category.name}" onclick="addCategoryFromData(this)">
                <span th:text="${category.name}"></span>
            </button>
        </div>
    </div>
</div>



<!-- Bootstrap JS 추가 -->
<script th:src="@{/js/bootstrap.js}"></script>
<script>
    function addCategoryFromData(element) {
        var categoryName = element.getAttribute('data-category-name');
        const input = document.getElementById('excludedCategories');
        if (input.value) {
            input.value += ', ' + categoryName;
        } else {
            input.value = categoryName;
        }
    }
</script>
</body>
</html>
